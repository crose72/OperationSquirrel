syntax = "proto3";
package os.logger;

import "Common.proto";

message TargetDetection {
  Time   t = 1;
  uint32 frame_id = 2;

  // --- Detection validity and IDs ---
  bool   is_target_detected = 10;     // was: target_valid
  int32  detection_id       = 11;     // was: target_detection_id
  int32  track_id           = 12;     // was: target_track_id
  int32  class_id           = 13;     // was: detection_class
  float  confidence         = 14;     // was: target_detection_conf

  // --- Bounding box geometry (pixel units) ---
  float bbox_offset_x_px     = 20;    // was: target_cntr_offset_x
  float bbox_offset_y_px     = 21;    // was: target_cntr_offset_y
  float bbox_height_px       = 22;    // was: target_height
  float bbox_width_px        = 23;    // was: target_width
  float bbox_aspect_ratio    = 24;    // was: target_aspect
  float bbox_left_px         = 25;    // was: target_left
  float bbox_right_px        = 26;    // was: target_right
  float bbox_top_px          = 27;    // was: target_top
  float bbox_bottom_px       = 28;    // was: target_bottom
  float bbox_center_x_px     = 29;    // was: target_center_x
  float bbox_center_y_px     = 30;    // was: target_center_y

  // --- Camera and angular geometry ---
  float delta_angle_deg       = 31;   // was: delta_angle
  float camera_tilt_deg       = 32;   // was: camera_tilt_angle
  float delta_distance_x_m    = 33;   // was: delta_d_x
  float delta_distance_z_m    = 34;   // was: delta_d_z

  // --- EKF-estimated target state ---
  float target_pos_x_est      = 40;   // was: x_target_ekf
  float target_pos_y_est      = 41;   // was: y_target_ekf
  float target_vel_x_est      = 42;   // was: vx_target_ekf
  float target_vel_y_est      = 43;   // was: vy_target_ekf
  float target_acc_x_est      = 44;   // was: ax_target_ekf
  float target_acc_y_est      = 45;   // was: ay_target_ekf

  // --- Post-filter measurement usability ---
  bool  is_measurement_valid  = 50;   // was: target_data_useful
}
